<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeetCode Badge</title>
    <link rel="shortcut icon" href="assets/images/site_ico.ico" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="style/style.css" />
</head>
<body>
<header>
    <div class="logo">
        <img src="assets/images/site_ico.ico" alt="Logo">
        LeetCode Badge
    </div>
    <a class="github-link" href="https://github.com/andrew-pavlov-ua/LeetCode-Widget" target="_blank"> 
        <button class="github-star"> 
            <img src="assets/images/github_logo.png" alt="GitHub logo"> 
            Star Project
        </button> </a>
</header>

<main>
    <h1>LeetCode Badge</h1>
    <div class="input-container">
        <form id="usernameForm">
            <input type="text" id="usernameInput" name="username" placeholder="Enter your LeetCode username" class="input" required>
            <button type="submit" class="button">Get Badge Code</button>
        </form>
        <div class="badge-link-container" id="badgeLinks" style="display: none;">
            <div class="embed-container">
                <div class="embed-box">
                    <div class="embed-title">Markdown:</div>
                    <div class="embed-content">
                        <div id="markdownEmbed" class="embed-code"></div>
                        <button class="copy-button" onclick="copyToClipboard('markdownEmbed')">Copy</button>
                    </div>
                </div>
                <div class="embed-box">
                    <div class="embed-title">HTML:</div>
                    <div class="embed-content">
                        <div id="htmlEmbed" class="embed-code"></div>
                        <button class="copy-button" onclick="copyToClipboard('htmlEmbed')">Copy</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<footer>
    Created by <a href="https://github.com/andrew-pavlov-ua" target="_blank">Andrew Pavlov</a>
</footer>

<script>
    function starRepo() {
        window.open("https://github.com/andrew-pavlov-ua/LeetCode-Widget", "_blank");
    }

    document.getElementById('usernameForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const username = document.getElementById('usernameInput').value.trim();
        const badgeUrl = `https://lc.andrewpavlov.org/api/slug/${username}/badge.svg`;
        const redirectUrl = `https://lc.andrewpavlov.org/${username}/redirect`;

        document.getElementById('markdownEmbed').textContent = `[![LeetCode Badge](${badgeUrl})](${redirectUrl})`;
        document.getElementById('htmlEmbed').textContent = `<a href="${redirectUrl}" target="_blank"><img src="${badgeUrl}" alt="LeetCode Badge"></a>`;
        document.getElementById('badgeLinks').style.display = 'block';
    });

    function copyToClipboard(elementId) {
        const text = document.getElementById(elementId).textContent;
        const tempInput = document.createElement('textarea');
        tempInput.value = text;
        document.body.appendChild(tempInput);
        tempInput.select();
        document.execCommand('copy');
        document.body.removeChild(tempInput);
    }
</script>
</body>
</html>
